"use strict";(self["webpackChunkgo_shopping"]=self["webpackChunkgo_shopping"]||[]).push([[621],{4621:function(t,r,e){e.r(r),e.d(r,{default:function(){return l}});e(4114);var o=function(){var t=this,r=t._self._c;return r("div",{staticClass:"order-detail-container"},[r("van-nav-bar",{staticStyle:{"background-color":"#f8f8f8","box-shadow":"0 2px 5px rgba(0, 0, 0, 0.1)"},attrs:{fixed:"",title:"订单详情页","left-arrow":""},on:{"click-left":function(r){return t.$router.go(-1)}}}),t._l(t.order.goods,(function(t){return r("div",{key:t.goods_id,staticClass:"goods-info"},[r("van-card",{staticClass:"goods-card",attrs:{num:t.total_num,price:t.total_pay_price,title:t.goods_name,thumb:t.goods_image}})],1)})),r("div",{staticClass:"order-info"},[r("p",[t._v("订单信息")]),r("br"),t._l(t.orderInfo,(function(e){return r("div",{key:e.label,staticClass:"info-item"},[r("p",{staticClass:"label"},[r("van-icon",{attrs:{name:e.icon}}),t._v(" "+t._s(e.label)+" ")],1),r("p",{staticClass:"value"},[t._v(t._s(e.value))])])}))],2),r("div",{staticClass:"address-info"},[r("p",[t._v("地址信息")]),r("br"),t._l(t.addressInfo,(function(e){return r("div",{key:e.label,staticClass:"info-item"},[r("p",{staticClass:"label"},[r("van-icon",{attrs:{name:e.icon}}),t._v(" "+t._s(e.label)+" ")],1),r("p",{staticClass:"value"},[t._v(t._s(e.value))])])}))],2),r("van-steps",{attrs:{direction:"vertical",active:0}},[r("van-step",[r("h3",[t._v(t._s(t.order.state_text))]),r("p",[t._v(t._s(t.order.pay_time))])]),r("van-step",[r("h3",[t._v("支付成功")]),r("p",[t._v(t._s(t.order.pay_time))])]),r("van-step",[r("h3",[t._v("提交订单")]),r("p",[t._v(t._s(t.order.create_time))])])],1),r("div",{staticClass:"footer"},[r("button",{staticClass:"footer-home",on:{click:function(r){return t.$router.push("/home")}}},[t._v("首页")]),30===t.order.goods.order_status?r("button",{staticClass:"footer-button secondary"},[t._v("申请售后")]):t._e(),r("button",{staticClass:"footer-button secondary",on:{click:t.orderEvaluate}},[t._v("订单评价")]),r("button",{staticClass:"footer-button primary",on:{click:t.buyAgain}},[t._v("再次购买")])])],2)},s=[],a=e(4180),n=e(9652),i={name:"OrderDetail",data(){return{countPrice:0,countNum:0,order:{goods:[],address:{name:"",phone:"",region:{province:"",city:"",region:""},detail:""}}}},async created(){await this.getOrderDetail(),this.countGoodsNum(),this.countOrderPrice(),this.getPayStatus()},computed:{getOrderID(){return this.$route.query.orderId},orderInfo(){return[{icon:"orders-o",label:"订单号:",value:this.order.order_no},{icon:"balance-o",label:"订单总价:",value:`¥${this.countPrice}`},{icon:"bill-o",label:"支付金额:",value:`¥${this.countPrice}`},{icon:"passed",label:"支付状态:",value:this.getPayStatus(this.order.pay_status)},{icon:"clock-o",label:"支付时间:",value:this.order.pay_time},{icon:"notes-o",label:"订单状态:",value:this.order.state_text}]},addressInfo(){return[{icon:"user-o",label:"收件人:",value:this.order.address.name},{icon:"phone-o",label:"联系电话:",value:this.order.address.phone},{icon:"location-o",label:"收货地址:",value:`${this.order.address.region.province} ${this.order.address.region.city} ${this.order.address.region.region} ${this.order.address.detail}`}]}},methods:{orderEvaluate(){this.$router.push({path:"/myorder/review",query:{orderId:this.order.order_id}})},async buyAgain(){try{for(const t of this.order.goods)await(0,n.U4)(t.goods_id,t.total_num,t.goods_sku_id);this.$router.push({path:"/cart"})}catch(t){console.error("Error adding items to cart:",t)}},countGoodsNum(){this.order.goods.forEach((t=>{t.total_num&&(this.countNum+=t.total_num)}))},countOrderPrice(){let t=0;this.order.goods.forEach((r=>{t+=Number(r.total_pay_price)*r.total_num})),this.countPrice=t.toFixed(2)},getPayStatus(t){switch(t){case 10:return"未支付";case 20:return"已支付";default:return"未知状态"}},async getOrderDetail(){try{const t=await(0,a.KU)(this.getOrderID);this.order=t.data.order}catch(t){console.log(t)}}}},d=i,c=e(1656),u=(0,c.A)(d,o,s,!1,null,"19f7f65f",null),l=u.exports},4180:function(t,r,e){e.d(r,{Fs:function(){return s},KU:function(){return i},N4:function(){return d},Nj:function(){return n},Z7:function(){return a},cC:function(){return u},l2:function(){return c}});var o=e(5720);const s=(t,r)=>{const e={mode:t,delivery:10,shopId:0,couponId:0,isUserPoints:0,...r};return o.A.get("/checkout/order",{params:e})},a=(t,r)=>{const e={mode:t,delivery:10,couponId:0,isUserPoints:0,payType:10,...r};return o.A.post("/checkout/submit",e)},n=(t,r)=>o.A.get("/order/list",{params:{dataType:t,page:r}}),i=t=>o.A.get("/order/detail",{params:{orderId:t}}),d=t=>o.A.post("/order/cancel",{orderId:t}),c=t=>o.A.post("/order/receipt",{orderId:t}),u=t=>o.A.post("/order.comment/submit",{orderId:t.orderId,form:t.form})}}]);
//# sourceMappingURL=621.6ccefc29.js.map