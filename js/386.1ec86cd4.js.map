{"version":3,"file":"js/386.1ec86cd4.js","mappings":"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","sources":["webpack://go-shopping/./src/views/myorder/review.vue","webpack://go-shopping/src/views/myorder/review.vue","webpack://go-shopping/./src/views/myorder/review.vue?971f","webpack://go-shopping/./src/views/myorder/review.vue?aa9c","webpack://go-shopping/./src/api/order.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"order-review\"},[_c('van-nav-bar',{staticStyle:{\"background-color\":\"#f8f8f8\",\"box-shadow\":\"0 2px 5px rgba(0, 0, 0, 0.1)\"},attrs:{\"fixed\":\"\",\"title\":'订单评价',\"left-arrow\":\"\",\"right-text\":_vm.rightButtonText},on:{\"click-left\":_vm.onLeftClick,\"click-right\":_vm.onRightClick}}),_c('div',{staticClass:\"content\"},[_c('van-card',{staticClass:\"goods-card\",attrs:{\"num\":_vm.currentGoods.total_num,\"price\":_vm.currentGoods.total_pay_price,\"title\":_vm.currentGoods.goods_name,\"thumb\":_vm.currentGoods.goods_image}},[_c('div',{staticClass:\"review-section\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticClass:\"rating-section\"},[_c('div',{staticClass:\"section-title\"},[_vm._v(\"商品评价\")]),_c('van-rate',{model:{value:(_vm.currentGoods.rating),callback:function ($$v) {_vm.$set(_vm.currentGoods, \"rating\", $$v)},expression:\"currentGoods.rating\"}})],1),_c('div',{staticClass:\"comment-section\"},[_c('div',{staticClass:\"section-title\"},[_vm._v(\"评价内容:\")]),_c('van-field',{staticClass:\"comment-field\",attrs:{\"placeholder\":\"写下你的评价...\",\"type\":\"textarea\",\"rows\":\"6\",\"autosize\":\"\",\"maxlength\":\"200\",\"show-word-limit\":\"\",\"clearable\":\"\"},model:{value:(_vm.currentGoods.comment),callback:function ($$v) {_vm.$set(_vm.currentGoods, \"comment\", $$v)},expression:\"currentGoods.comment\"}})],1),_c('input',{attrs:{\"type\":\"file\"},on:{\"change\":_vm.onImageChange}}),(_vm.currentGoods.images.length)?_c('div',_vm._l((_vm.currentGoods.images),function(image,index){return _c('div',{key:index},[_c('img',{staticStyle:{\"max-width\":\"100%\",\"height\":\"auto\"},attrs:{\"src\":image,\"alt\":\"Uploaded Image\"}})])}),0):_vm._e()])])],1),_c('van-button',{staticClass:\"submit-button\",attrs:{\"type\":\"primary\",\"block\":\"\"},on:{\"click\":_vm.saveDraft}},[_vm._v(\" 保存草稿 \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"order-review\">\r\n    <van-nav-bar\r\n      fixed\r\n      :title=\"'订单评价'\"\r\n      left-arrow\r\n      @click-left=\"onLeftClick\"\r\n      @click-right=\"onRightClick\"\r\n      :right-text=\"rightButtonText\"\r\n      style=\"background-color: #f8f8f8; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\"\r\n    />\r\n\r\n    <div class=\"content\">\r\n      <van-card\r\n        :num=\"currentGoods.total_num\"\r\n        :price=\"currentGoods.total_pay_price\"\r\n        :title=\"currentGoods.goods_name\"\r\n        :thumb=\"currentGoods.goods_image\"\r\n        class=\"goods-card\"\r\n      >\r\n        <div slot=\"footer\" class=\"review-section\">\r\n          <div class=\"rating-section\">\r\n            <div class=\"section-title\">商品评价</div>\r\n            <van-rate v-model=\"currentGoods.rating\" />\r\n          </div>\r\n\r\n          <div class=\"comment-section\">\r\n            <div class=\"section-title\">评价内容:</div>\r\n            <van-field\r\n              v-model=\"currentGoods.comment\"\r\n              placeholder=\"写下你的评价...\"\r\n              type=\"textarea\"\r\n              rows=\"6\"\r\n              autosize\r\n              maxlength=\"200\"\r\n              show-word-limit\r\n              clearable\r\n              class=\"comment-field\"\r\n            />\r\n          </div>\r\n          <!-- 真实图片上传功能暂时关闭 -->\r\n          <!-- <div class=\"uploader-section\">\r\n            <div class=\"section-title\">上传图片:</div>\r\n            <van-uploader\r\n              v-model=\"currentGoods.images\"\r\n              multiple\r\n              :after-read=\"onImageUpload\"\r\n              :max-count=\"5\"\r\n              class=\"image-uploader\"\r\n            />\r\n          </div> -->\r\n\r\n          <!-- 新增 Base64 图片上传实现 -->\r\n          <input type=\"file\" @change=\"onImageChange\" />\r\n          <div v-if=\"currentGoods.images.length\">\r\n            <div v-for=\"(image, index) in currentGoods.images\" :key=\"index\">\r\n              <img :src=\"image\" alt=\"Uploaded Image\" style=\"max-width: 100%; height: auto;\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </van-card>\r\n    </div>\r\n\r\n    <van-button\r\n      type=\"primary\"\r\n      block\r\n      @click=\"saveDraft\"\r\n      class=\"submit-button\"\r\n    >\r\n      保存草稿\r\n    </van-button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getOrderDetail, submitComment } from '@/api/order'\r\n// import { uploadImage } from '@/api/user'\r\n\r\nexport default {\r\n  name: 'OrderReview',\r\n  data () {\r\n    return {\r\n      goods: [],\r\n      currentIndex: 0\r\n    }\r\n  },\r\n  computed: {\r\n    getOrderId () {\r\n      return this.$route.query.orderId\r\n    },\r\n    currentGoods () {\r\n      return this.goods[this.currentIndex] || { images: [] }\r\n    },\r\n    rightButtonText () {\r\n      return this.isLastItem ? '提交' : '下一件'\r\n    },\r\n    isLastItem () {\r\n      return this.currentIndex === this.goods.length - 1\r\n    }\r\n  },\r\n  async created () {\r\n    const response = await getOrderDetail(this.getOrderId)\r\n    const storedDraft = this.loadDraft()\r\n    this.goods = response.data.order.goods.map(item => ({\r\n      ...item,\r\n      rating: storedDraft[item.goods_id]?.rating || 0,\r\n      comment: storedDraft[item.goods_id]?.comment || '',\r\n      images: []\r\n    }))\r\n  },\r\n  methods: {\r\n    onLeftClick () {\r\n      if (this.currentIndex === 0) {\r\n        this.$router.go(-1)\r\n      } else {\r\n        this.currentIndex -= 1\r\n      }\r\n    },\r\n    onRightClick () {\r\n      if (this.isLastItem) {\r\n        this.submitReview()\r\n      } else {\r\n        this.currentIndex += 1\r\n      }\r\n    },\r\n    // 将得到的图片文件对象转换为 Base64 字符串\r\n    onImageChange (event) {\r\n      const files = event.target.files\r\n      if (files.length) {\r\n        const file = files[0]\r\n        const reader = new FileReader()\r\n        reader.onloadend = () => {\r\n          this.currentGoods.images.push(reader.result)\r\n        }\r\n        reader.readAsDataURL(file) // 将文件读取为 Base64 字符串\r\n      }\r\n    },\r\n    // 后端接口可用时，可打开注释\r\n    // async onImageUpload (file) {\r\n    //   try {\r\n    //     const formData = new FormData()\r\n    //     formData.append('file', file.file)\r\n    //     console.log(formData.get('file'))\r\n    //     const response = await uploadImage(formData)\r\n    //     if (response.status === 200) {\r\n    //       this.currentGoods.images.push({\r\n    //         url: response.data.fileInfo.preview_url\r\n    //       })\r\n    //     }\r\n    //   } catch (error) {\r\n    //     this.$toast.fail('图片上传失败')\r\n    //     console.error(error)\r\n    //   }\r\n    // },\r\n    saveDraft () {\r\n      const draft = this.goods.reduce((acc, item) => {\r\n        acc[item.goods_id] = {\r\n          rating: item.rating,\r\n          comment: item.comment\r\n        }\r\n        return acc\r\n      }, {})\r\n      localStorage.setItem(`order_${this.getOrderId}_draft`, JSON.stringify(draft))\r\n      this.$toast.success('草稿已保存')\r\n    },\r\n    loadDraft () {\r\n      const draft = localStorage.getItem(`order_${this.getOrderId}_draft`)\r\n      return draft ? JSON.parse(draft) : {}\r\n    },\r\n    async submitReview () {\r\n      try {\r\n        // 接口要求参数为dataObject，这里将评价信息封装为对象\r\n        const reviews = {}\r\n        reviews.orderId = this.getOrderId\r\n        reviews.form = []\r\n        // 将goods_id，order_id，score，content，imageList，uploaded等信息封装为对象放入reviews.form数组中\r\n        this.goods.forEach(item => {\r\n          const review = {}\r\n          review.goods_id = item.goods_id\r\n          review.order_id = item.order_id\r\n          review.score = item.rating\r\n          review.content = item.comment\r\n          review.imageList = item.images.map(image => image.url)\r\n          review.uploaded = true\r\n          reviews.form.push(review)\r\n        })\r\n        // 调用评价接口\r\n        await submitComment(reviews)\r\n        this.$toast.success('评价提交成功')\r\n        this.$router.go(-1)\r\n        localStorage.removeItem(`order_${this.getOrderId}_draft`)\r\n      } catch (error) {\r\n        this.$toast.fail(error)\r\n        console.error(error)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.order-review {\r\n  padding-top: 20px; /* 调整与导航栏的距离，防止被遮挡 */\r\n  padding-bottom: 110px; /* 为底部保存草稿按钮腾出空间 */\r\n  background-color: #f2f2f2; /* 页面背景颜色 */\r\n}\r\n\r\n.content {\r\n  padding: 1px; /* 内容区域的内边距 */\r\n}\r\n\r\n.review-item {\r\n  margin-bottom: 20px; /* 每个评价项的底部间距 */\r\n  background-color: #fff; /* 评价项背景颜色 */\r\n  border-radius: 8px; /* 评价项的圆角 */\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* 评价项的阴影 */\r\n}\r\n\r\n.goods-card {\r\n  margin: 15px 0; /* 商品信息卡片的上下外边距 */\r\n  padding: 30px 5px; /* 商品信息卡片的内边距 */\r\n  border-radius: 8px; /* 商品信息卡片的圆角 */\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 商品信息卡片的阴影 */\r\n}\r\n\r\n.review-section {\r\n  padding-top: 10px; /* 评价部分的上内边距 */\r\n  text-align: left; /* 内容左对齐 */\r\n}\r\n\r\n.rating-section,\r\n.comment-section,\r\n.uploader-section {\r\n  margin-bottom: 15px; /* 各部分之间的底部间距 */\r\n  text-align: left; /* 内容左对齐 */\r\n}\r\n\r\n.section-title {\r\n  font-size: 14px; /* 标题字体大小 */\r\n  color: #333; /* 标题颜色 */\r\n  margin-bottom: 15px; /* 标题底部间距 */\r\n}\r\n\r\n.comment-field {\r\n  background-color: #F2F2F2; /* 评价内容输入框的背景颜色 */\r\n  padding: 10px; /* 评价内容输入框的内边距 */\r\n  border-radius: 4px; /* 评价内容输入框的圆角 */\r\n  border: 1px solid #e8e8e8; /* 评价内容输入框的边框 */\r\n}\r\n\r\n.image-uploader .van-uploader__wrapper {\r\n  background-color: #f9f9f9; /* 图片上传组件的背景颜色 */\r\n  padding: 10px; /* 图片上传组件的内边距 */\r\n  border-radius: 4px; /* 图片上传组件的圆角 */\r\n  border: 1px solid #e8e8e8; /* 图片上传组件的边框 */\r\n}\r\n\r\n.submit-button {\r\n  position: fixed; /* 固定在页面底部 */\r\n  bottom: 20px; /* 调整距离底部的距离 */\r\n  left: 50%; /* 左侧对齐到页面中间 */\r\n  transform: translateX(-50%); /* 水平居中 */\r\n  width: calc(100% - 40px); /* 按钮宽度相对于屏幕宽度调整 */\r\n  max-width: 400px; /* 给按钮设置一个最大宽度 */\r\n  padding: 15px 20px; /* 调整按钮的内边距 */\r\n  border: none; /* 去掉按钮的边框 */\r\n  border-radius: 12px; /* 调整按钮的圆角 */\r\n  z-index: 100; /* 按钮的堆叠顺序，确保在其他内容之上 */\r\n  background-color: #ff6f61; /* 保存草稿按钮的背景颜色 */\r\n  color: #fff; /* 保存草稿按钮的字体颜色 */\r\n}\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./review.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./review.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./review.vue?vue&type=template&id=395666e4&scoped=true\"\nimport script from \"./review.vue?vue&type=script&lang=js\"\nexport * from \"./review.vue?vue&type=script&lang=js\"\nimport style0 from \"./review.vue?vue&type=style&index=0&id=395666e4&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"395666e4\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n// 提交订单确认\r\n// mode: cart(购物车结算) 可补全参数cartIds\r\n// ifObj: buyNow(立即购买) 可补全参数goodsId, goodsNum, goodsSkuId,remark\r\nexport const checkOrder = (mode, ifObj) => {\r\n  // console.log('api接收参数mode:', mode)\r\n  // console.log('api接收参数ifObj:', ifObj)\r\n  const tfkObj = {\r\n    mode: mode, // buyNow：立即购买， cart: 购物车购买\r\n    delivery: 10, // 物流方式\r\n    shopId: 0, // 自提门店id\r\n    couponId: 0, // 优惠券ID，暂时不用\r\n    isUserPoints: 0, // 是否使用积分，1使用，0不使用\r\n    ...ifObj // 未传递的可选参数可用ifObj包装，动态展开\r\n  }\r\n  // console.log('api发送参数tfkObj:', tfkObj)\r\n  return request.get('/checkout/order', {\r\n    params: tfkObj\r\n  })\r\n}\r\n\r\n// 结算订单\r\n// mode: cart(购物车结算) 可补全参数cartIds\r\n// ifObj: buyNow(立即购买) 可补全参数goodsId, goodsNum, goodsSkuId\r\nexport const submitOrder = (mode, dataObj) => {\r\n  const tfkObj = {\r\n    mode: mode, // buyNow：立即购买， cart: 购物车购买\r\n    delivery: 10, // 物流方式\r\n    couponId: 0, // 优惠券ID，暂时不用\r\n    isUserPoints: 0, // 是否使用积分，1使用，0不使用\r\n    payType: 10, // 余额支付\r\n    ...dataObj // 未传递的可选参数可用dataObj包装，动态展开\r\n  }\r\n  return request.post('/checkout/submit', tfkObj)\r\n}\r\n\r\n// 订单列表\r\nexport const getMyOrderList = (dataType, page) => {\r\n  return request.get('/order/list', {\r\n    params: {\r\n      dataType,\r\n      page\r\n    }\r\n  })\r\n}\r\n\r\n// 获取订单详情\r\nexport const getOrderDetail = (orderId) => {\r\n  return request.get('/order/detail', {\r\n    params: {\r\n      orderId: orderId\r\n    }\r\n  })\r\n}\r\n\r\n// 取消订单\r\nexport const cancelOrder = (orderId) => {\r\n  return request.post('/order/cancel', {\r\n    orderId: orderId\r\n  })\r\n}\r\n\r\n// 支付未支付的订单\r\nexport const payOrder = (orderId, payType) => {\r\n  return request.get('/order/pay', {\r\n    query: {\r\n      orderId: orderId,\r\n      payType: payType // 支付方式，10：余额支付，20：微信支付\r\n    }\r\n  })\r\n}\r\n\r\n// 订单确认收货\r\nexport const receiptOrder = (orderId) => {\r\n  return request.post('/order/receipt', {\r\n    orderId: orderId\r\n  })\r\n}\r\n\r\n// 提交商品评价\r\nexport const submitComment = (dataObj) => {\r\n  return request.post('/order.comment/submit', {\r\n    orderId: dataObj.orderId,\r\n    form: dataObj.form\r\n  })\r\n}\r\n\r\n// 已评价的商品列表\r\nexport const getCommentList = (orderId) => {\r\n  return request.get('/order.comment/list', {\r\n    query: {\r\n      orderId: orderId\r\n    }\r\n  })\r\n}\r\n\r\n// 申请售后\r\nexport const refundGoods = (dataObj) => {\r\n  return request.post('/refund/goods', {\r\n    orderGoodsId: dataObj.orderGoodsId,\r\n    form: dataObj.form\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","staticStyle","attrs","rightButtonText","on","onLeftClick","onRightClick","currentGoods","total_num","total_pay_price","goods_name","goods_image","slot","_v","model","value","rating","callback","$$v","$set","expression","comment","onImageChange","images","length","_l","image","index","key","_e","saveDraft","staticRenderFns","name","data","goods","currentIndex","computed","getOrderId","$route","query","orderId","isLastItem","created","response","getOrderDetail","storedDraft","loadDraft","order","map","item","goods_id","methods","$router","go","submitReview","event","files","target","file","reader","FileReader","onloadend","push","result","readAsDataURL","draft","reduce","acc","localStorage","setItem","JSON","stringify","$toast","success","getItem","parse","reviews","form","forEach","review","order_id","score","content","imageList","url","uploaded","submitComment","removeItem","error","fail","console","component","checkOrder","mode","ifObj","tfkObj","delivery","shopId","couponId","isUserPoints","request","get","params","submitOrder","dataObj","payType","post","getMyOrderList","dataType","page","cancelOrder","receiptOrder"],"sourceRoot":""}