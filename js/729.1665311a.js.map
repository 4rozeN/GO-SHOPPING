{"version":3,"file":"js/729.1665311a.js","mappings":"kKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,GAAG,MAAQ,QAAQ,aAAa,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,IAAI,EAAE,KAAKP,EAAG,MAAM,CAACE,YAAY,gBAAgBJ,EAAIU,GAAIV,EAAIW,mBAAmB,SAASC,GAAM,OAAOV,EAAG,MAAM,CAACW,IAAID,EAAKE,WAAWV,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAMO,EAAKG,KAAKC,YAAchB,EAAIiB,cAAc,IAAM,MAAMf,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIkB,GAAGlB,EAAImB,GAAGP,EAAKG,KAAKK,cAAclB,EAAG,WAAW,CAACG,MAAM,CAAC,KAAO,GAAG,MAAQO,EAAKS,MAAM,MAAQ,UAAU,YAAY,OAAO,aAAa,WAAW,GAAGnB,EAAG,MAAM,CAACE,YAAY,WAAW,CAACJ,EAAIkB,GAAG,IAAIlB,EAAImB,GAAGP,EAAKU,SAAS,OAAOpB,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACJ,EAAIkB,GAAG,IAAIlB,EAAImB,GAAGP,EAAKW,aAAa,QAAQ,IAAG,IAAI,EACt0B,EACIC,EAAkB,G,UCsBtB,GACAC,KAAA,kBACAC,SAAA,CACAC,QAAAA,GACA,YAAAC,OAAAC,OAAAC,EACA,GAEA,aAAAC,GACA,IACA,MAAAC,EAAA,KAAAL,SACAM,QAAAC,EAAAA,EAAAA,IAAA,CACAC,WAAA,EACAH,YAEA,KAAArB,kBAAAsB,EAAAG,KAAAC,KAAAD,KACAE,QAAAC,IAAA,KAAA5B,kBACA,OAAA6B,GACAF,QAAAE,MAAA,kCAAAA,EAEA,CACA,EACAJ,IAAAA,GACA,OACAnB,cAAA,kFACAN,kBAAA,GAEA,GClDkQ,I,UCQ9P8B,GAAY,OACd,EACA1C,EACAyB,GACA,EACA,KACA,WACA,MAIF,EAAeiB,EAAiB,O,8FChBzB,MAAMC,EAAkBV,GACtBW,EAAAA,EAAQC,IAAI,gBAAiB,CAClCf,OAAQ,CACNG,aAMOE,EAAyBW,IACpC,MAAM,UAAEV,EAAS,QAAEH,EAAO,KAAEc,GAASD,EACrC,OAAOF,EAAAA,EAAQC,IAAI,gBAAiB,CAClCf,OAAQ,CACNM,YACAH,UACAc,SAEF,C","sources":["webpack://go-shopping/./src/views/productdetail/evaluation.vue","webpack://go-shopping/src/views/productdetail/evaluation.vue","webpack://go-shopping/./src/views/productdetail/evaluation.vue?bd52","webpack://go-shopping/./src/views/productdetail/evaluation.vue?a767","webpack://go-shopping/./src/api/goodsDetail.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"goodsEvaluation\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"商品评价页\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"comment-list\"},_vm._l((_vm.goodsCommentArray),function(item){return _c('div',{key:item.comment_id,staticClass:\"comment-item\"},[_c('div',{staticClass:\"top\"},[_c('img',{attrs:{\"src\":item.user.avatar_url || _vm.defaultAvatar,\"alt\":\"\"}}),_c('div',{staticClass:\"name\"},[_vm._v(_vm._s(item.user.nick_name))]),_c('van-rate',{attrs:{\"size\":16,\"value\":item.score,\"color\":\"#ffd21e\",\"void-icon\":\"star\",\"void-color\":\"#eee\"}})],1),_c('div',{staticClass:\"content\"},[_vm._v(\" \"+_vm._s(item.content)+\" \")]),_c('div',{staticClass:\"time\"},[_vm._v(\" \"+_vm._s(item.create_time)+\" \")])])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"goodsEvaluation\">\r\n    <van-nav-bar fixed title=\"商品评价页\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\r\n    <div class=\"comment-list\">\r\n      <div class=\"comment-item\" v-for=\"item in goodsCommentArray\" :key=\"item.comment_id\">\r\n        <div class=\"top\">\r\n          <img :src=\"item.user.avatar_url || defaultAvatar\" alt=\"\">\r\n          <div class=\"name\">{{item.user.nick_name}}</div>\r\n          <van-rate :size=\"16\" :value=\"item.score\" color=\"#ffd21e\" void-icon=\"star\" void-color=\"#eee\"/>\r\n        </div>\r\n        <div class=\"content\">\r\n          {{item.content}}\r\n        </div>\r\n        <div class=\"time\">\r\n          {{item.create_time}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getGoodsCommentDetail } from '@/api/goodsDetail'\r\nexport default {\r\n  name: 'GoodsEvaluation',\r\n  computed: {\r\n    detailId () {\r\n      return this.$route.params.id\r\n    }\r\n  },\r\n  async created () {\r\n    try {\r\n      const goodsId = this.detailId\r\n      const commentRes = await getGoodsCommentDetail({\r\n        scoreType: -1, // 全部评价\r\n        goodsId\r\n      })\r\n      this.goodsCommentArray = commentRes.data.list.data\r\n      console.log(this.goodsCommentArray)\r\n    } catch (error) {\r\n      console.error('Failed to fetch goods comments:', error)\r\n      // 可以在这里添加更多的错误处理逻辑，比如显示错误提示\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      defaultAvatar: 'https://ali-4rozen-oss.oss-cn-guangzhou.aliyuncs.com/coding/202408301648039.png',\r\n      goodsCommentArray: [] // 商品评价\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.goodsEvaluation {\r\n  padding-top: 46px;\r\n  background-color: #f7f7f7;\r\n  min-height: 100vh;\r\n  ::v-deep .van-icon-arrow-left {\r\n    color: #333;\r\n  }\r\n\r\n  .comment-list {\r\n    padding: 10px 15px;\r\n  }\r\n\r\n  .comment-item {\r\n    background-color: #fff;\r\n    border-radius: 8px;\r\n    padding: 15px;\r\n    margin-bottom: 10px;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\r\n    font-size: 14px;\r\n    line-height: 22px;\r\n\r\n    .top {\r\n      display: flex;\r\n      align-items: center;\r\n      margin-bottom: 10px;\r\n\r\n      img {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 50%;\r\n        margin-right: 10px;\r\n        object-fit: cover;\r\n        border: 1px solid #eaeaea;\r\n      }\r\n\r\n      .name {\r\n        font-weight: 600;\r\n        color: #333;\r\n        flex-grow: 1;\r\n      }\r\n\r\n      .van-rate {\r\n        margin-left: auto;\r\n      }\r\n    }\r\n\r\n    .content {\r\n      color: #555;\r\n      margin-bottom: 10px;\r\n      white-space: normal;\r\n      word-wrap: break-word;\r\n    }\r\n\r\n    .time {\r\n      font-size: 12px;\r\n      color: #999;\r\n      text-align: right;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./evaluation.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./evaluation.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./evaluation.vue?vue&type=template&id=276de9a2&scoped=true\"\nimport script from \"./evaluation.vue?vue&type=script&lang=js\"\nexport * from \"./evaluation.vue?vue&type=script&lang=js\"\nimport style0 from \"./evaluation.vue?vue&type=style&index=0&id=276de9a2&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"276de9a2\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n// 获取商品详情\r\nexport const getGoodsDetail = (goodsId) => {\r\n  return request.get('/goods/detail', {\r\n    params: {\r\n      goodsId\r\n    }\r\n  })\r\n}\r\n\r\n// 获取商品评价详情\r\nexport const getGoodsCommentDetail = (obj) => {\r\n  const { scoreType, goodsId, page } = obj\r\n  return request.get('/comment/list', {\r\n    params: {\r\n      scoreType, // -1 全部 10 好评 20 中评 30 差评\r\n      goodsId,\r\n      page\r\n    }\r\n  })\r\n}\r\n\r\n// 获取商品评价总数\r\nexport const getGoodsCommentCount = (goodsId) => {\r\n  return request.get('/comment/total', {\r\n    params: { goodsId }\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","_l","goodsCommentArray","item","key","comment_id","user","avatar_url","defaultAvatar","_v","_s","nick_name","score","content","create_time","staticRenderFns","name","computed","detailId","$route","params","id","created","goodsId","commentRes","getGoodsCommentDetail","scoreType","data","list","console","log","error","component","getGoodsDetail","request","get","obj","page"],"sourceRoot":""}