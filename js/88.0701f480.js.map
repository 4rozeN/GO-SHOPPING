{"version":3,"file":"js/88.0701f480.js","mappings":"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","sources":["webpack://go-shopping/./src/views/pay/index.vue","webpack://go-shopping/src/views/pay/index.vue","webpack://go-shopping/./src/views/pay/index.vue?0cce","webpack://go-shopping/./src/views/pay/index.vue?b002","webpack://go-shopping/./src/api/order.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pay\"},[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"订单结算台\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"address\"},[_c('div',{staticClass:\"left-icon\"},[_c('van-icon',{attrs:{\"name\":\"logistics\"}})],1),(_vm.chosenAddress)?_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"info-content\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.chosenAddress.name)+\" \")]),_c('span',{staticClass:\"mobile\"},[_vm._v(_vm._s(_vm.chosenAddress.phone))])]),_c('div',{staticClass:\"info-address\"},[_vm._v(\" \"+_vm._s(_vm.chosenAddress.detail)+\" \")])]):_c('div',{staticClass:\"info\"},[_vm._v(\" 还没有地址哦，点击右侧按钮添加吧 \")]),_c('div',{staticClass:\"right-icon\",on:{\"click\":_vm.goAddress}},[_c('van-icon',{attrs:{\"name\":\"arrow\"}})],1)]),_c('div',{staticClass:\"pay-list\"},[_c('div',{staticClass:\"list\"},_vm._l((_vm.goodsList),function(item){return _c('div',{key:item.goods_id,staticClass:\"goods-item\"},[_c('div',{staticClass:\"left\"},[_c('img',{attrs:{\"src\":item.goods_image,\"alt\":\"\"}})]),_c('div',{staticClass:\"right\"},[_c('p',{staticClass:\"tit text-ellipsis-2\"},[_vm._v(\" \"+_vm._s(item.goods_name)+\" \")]),_c('p',{staticClass:\"info\"},[_c('span',{staticClass:\"count\"},[_vm._v(\"共\"+_vm._s(item.total_num)+\"件\")]),_c('span',{staticClass:\"price\"},[_vm._v(\"¥\"+_vm._s((item.total_price)))])])])])}),0),_c('div',{staticClass:\"flow-num-box\"},[_c('span',[_vm._v(\"共 \"+_vm._s(_vm.goodsNumCount)+\" 件商品，合计：\")]),_c('span',{staticClass:\"money\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsTotalPrice))])]),_c('div',{staticClass:\"pay-detail\"},[_c('div',{staticClass:\"pay-cell\"},[_c('span',[_vm._v(\"订单总金额：\")]),_c('span',{staticClass:\"red\"},[_vm._v(\"￥\"+_vm._s(_vm.goodsTotalPrice))])]),_c('div',{staticClass:\"pay-cell\"},[_c('span',[_vm._v(\"优惠券：\")]),_c('span',[_vm._v(_vm._s(_vm.personal.couponId ? '优惠券可用' : '无优惠券可用'))])]),_c('div',{staticClass:\"pay-cell\"},[_c('span',[_vm._v(\"配送费用：\")]),(false)?_c('span',[_vm._v(\"请先选择配送地址\")]):_c('span',{staticClass:\"red\"},[_vm._v(\"+￥0.00\")])])]),_c('div',{staticClass:\"pay-way\"},[_c('span',{staticClass:\"tit\"},[_vm._v(\"支付方式\")]),_c('div',{staticClass:\"pay-cell\"},[_c('span',[_c('van-icon',{attrs:{\"name\":\"balance-o\"}}),_vm._v(\"余额支付（可用 ¥ \"+_vm._s(_vm.personal.balance)+\" 元）\")],1),_c('span',{staticClass:\"red\"},[_c('van-icon',{attrs:{\"name\":\"passed\"}})],1)])]),_c('div',{staticClass:\"buytips\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.remark),expression:\"remark\"}],attrs:{\"placeholder\":\"选填：买家留言（50字内）\",\"name\":\"\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\"},domProps:{\"value\":(_vm.remark)},on:{\"input\":function($event){if($event.target.composing)return;_vm.remark=$event.target.value}}})])]),_c('div',{staticClass:\"footer-fixed\"},[_c('div',{staticClass:\"left\"},[_vm._v(\"实付款：\"),_c('span',[_vm._v(\"￥\"+_vm._s(_vm.goodsTotalPrice))])]),_c('div',{staticClass:\"tipsbtn\",on:{\"click\":_vm.orderConfirm}},[_vm._v(\"提交订单\")])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"pay\">\r\n    <van-nav-bar fixed title=\"订单结算台\" left-arrow @click-left=\"$router.go(-1)\" />\r\n\r\n    <!-- 地址相关 -->\r\n    <div class=\"address\">\r\n\r\n      <div class=\"left-icon\">\r\n        <van-icon name=\"logistics\" />\r\n      </div>\r\n\r\n      <div class=\"info\" v-if=\"chosenAddress\">\r\n        <div class=\"info-content\">\r\n          <span class=\"name\">{{ chosenAddress.name }} </span>\r\n          <span class=\"mobile\">{{ chosenAddress.phone }}</span>\r\n        </div>\r\n        <div class=\"info-address\">\r\n          {{ chosenAddress.detail }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"info\" v-else>\r\n        还没有地址哦，点击右侧按钮添加吧\r\n      </div>\r\n\r\n      <div class=\"right-icon\" @click=\"goAddress\">\r\n        <van-icon name=\"arrow\" />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 订单明细 -->\r\n    <div class=\"pay-list\">\r\n      <div class=\"list\">\r\n        <div class=\"goods-item\" v-for=\"item in goodsList\" :key=\"item.goods_id\">\r\n            <div class=\"left\">\r\n              <img :src=\"item.goods_image\" alt=\"\" />\r\n            </div>\r\n            <div class=\"right\">\r\n              <p class=\"tit text-ellipsis-2\">\r\n                 {{ item.goods_name }}\r\n              </p>\r\n              <p class=\"info\">\r\n                <span class=\"count\">共{{ item.total_num }}件</span>\r\n                <span class=\"price\">¥{{(item.total_price)}}</span>\r\n              </p>\r\n            </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"flow-num-box\">\r\n        <span>共 {{goodsNumCount}} 件商品，合计：</span>\r\n        <span class=\"money\">￥{{goodsTotalPrice}}</span>\r\n      </div>\r\n\r\n      <div class=\"pay-detail\">\r\n        <div class=\"pay-cell\">\r\n          <span>订单总金额：</span>\r\n          <span class=\"red\">￥{{goodsTotalPrice}}</span>\r\n        </div>\r\n\r\n        <div class=\"pay-cell\">\r\n          <span>优惠券：</span>\r\n          <span>{{personal.couponId ? '优惠券可用' : '无优惠券可用'}}</span>\r\n        </div>\r\n\r\n        <div class=\"pay-cell\">\r\n          <span>配送费用：</span>\r\n          <span v-if=\"false\">请先选择配送地址</span>\r\n          <span v-else class=\"red\">+￥0.00</span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 支付方式 -->\r\n      <div class=\"pay-way\">\r\n        <span class=\"tit\">支付方式</span>\r\n        <div class=\"pay-cell\">\r\n          <span><van-icon name=\"balance-o\" />余额支付（可用 ¥ {{personal.balance}} 元）</span>\r\n          <!-- <span>请先选择配送地址</span> -->\r\n          <span class=\"red\"><van-icon name=\"passed\" /></span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 买家留言 -->\r\n      <div class=\"buytips\">\r\n        <textarea v-model=\"remark\" placeholder=\"选填：买家留言（50字内）\" name=\"\" id=\"\" cols=\"30\" rows=\"10\"></textarea>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 底部提交 -->\r\n    <div class=\"footer-fixed\">\r\n      <div class=\"left\">实付款：<span>￥{{goodsTotalPrice}}</span></div>\r\n      <div class=\"tipsbtn\" @click=\"orderConfirm\">提交订单</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport addressCTN from '@/mixins/addressCTN' // 将地区Code转为Name，需要传入regionCode\r\nimport addressHandler from '@/mixins/addressHandler'\r\nimport { mapActions, mapGetters, mapMutations } from 'vuex'\r\nimport { checkOrder, submitOrder } from '@/api/order'\r\nimport { getDefaultAddressId, getAddressList, getAddressDetail } from '@/api/address'\r\n\r\nexport default {\r\n  name: 'PayIndex',\r\n  mixins: [addressCTN, addressHandler],\r\n  async created () {\r\n    // console.log('params:', this.$route.params.adsid)\r\n    try {\r\n      // 尝试拉取默认地址id，如无赋值为0\r\n      const { data: { defaultId } } = await this.myDefaultAddressId() || 0\r\n      this.myDefaultId = defaultId\r\n      console.log('defaultId:', defaultId)\r\n    } catch (error) {\r\n      this.myDefaultId = 0\r\n      console.log('没有默认地址Id', error)\r\n    }\r\n    await this.myAddressList()\r\n    if (this.addressList.length === 0) {\r\n      // 说明没有地址存在，啥也不干\r\n      this.chosenAddress = 0\r\n      console.log('没有地址存在，啥也干不了')\r\n    } else {\r\n      // 说明有地址存在\r\n      if (this.myDefaultId) {\r\n        // 说明有默认地址，拉取地址详情\r\n        const res = await this.myAddressDetail(Number(this.myDefaultId))\r\n        console.log('地址res:', res)\r\n        // 格式化地区信息\r\n        res.detail = this.getRegionStrByCode(this.getRegionCode(res.province_id, res.city_id, res.region_id)) + ' ' + res.detail\r\n        // 将得到的地址信息给本地进行渲染\r\n        this.chosenAddress = res\r\n        console.log('有默认地址，地址详情res：', res)\r\n        console.log('格式化后的地址：', this.chosenAddress)\r\n      } else {\r\n        // 说明没有默认地址Id，展示地址列表的第一个数据\r\n        const res = await this.myAddressListZero()\r\n        // 格式化地区信息\r\n        res.detail = this.getRegionStrByCode(this.getRegionCode(res.province_id, res.city_id, res.region_id)) + ' ' + res.detail\r\n        // 将得到的地址信息给本地进行渲染\r\n        this.chosenAddress = res\r\n        console.log('没有默认地址，展示第一个地址：', res)\r\n        console.log('格式化后的地址：', this.chosenAddress)\r\n      }\r\n    }\r\n    // 提交订单\r\n    try {\r\n      await this.getOrderList()\r\n    } catch (error) {\r\n      console.log('提交订单失败', error)\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      myDefaultId: 0, // 默认地址Id\r\n      remark: '', // 买家留言\r\n      chosenAddress: {}, // 被选择进行展示的地址\r\n      addressList: [], // 购物车列表\r\n      goodsList: [], // 要进行渲染的商品列表\r\n      personal: {}, // 个人信息\r\n      setting: {} // 系统设置\r\n    }\r\n  },\r\n  computed: {\r\n    goodsTotalPrice () {\r\n      // 累加this.goodsList的goods_price_min\r\n      let price = 0\r\n      this.goodsList.forEach(item => {\r\n        price += Number(item.goods_price_min) * item.total_num\r\n      })\r\n      return price.toFixed(2)\r\n    },\r\n    goodsNumCount () {\r\n      // 累加this.goodsList的total_num\r\n      let count = 0\r\n      this.goodsList.forEach(item => {\r\n        count += item.total_num\r\n      })\r\n      return count\r\n    },\r\n    selectedA () {\r\n      return this.chosenAddress\r\n    },\r\n    cartIds () {\r\n      return this.$route.query.cartIds\r\n    },\r\n    getadsid () {\r\n      return this.$route.params.adsid\r\n    },\r\n    getModeType () {\r\n      return this.$route.query.mode\r\n    },\r\n    goodsId () {\r\n      return this.$route.query.goodsId\r\n    },\r\n    goodsSkuId () {\r\n      return this.$route.query.goodsSkuId\r\n    },\r\n    goodsNum () {\r\n      return this.$route.query.goodsNum\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations('Address', ['CLEAR_SELECTED_ADDRESS_ID']),\r\n    ...mapActions('Address', ['getAddressList']),\r\n    ...mapGetters('Address', ['getDefaultAddressId', 'getSelection']),\r\n    ...mapActions('Cart', ['getCartAction']),\r\n    ...mapGetters('Cart', ['selectedCartList', 'selectedCartCount', 'selectedPrice']),\r\n    ...mapGetters('Order', ['getMode', 'getCartIds']),\r\n    // 得到地址列表\r\n    async myAddressList () {\r\n      const { data: { list } } = await getAddressList()\r\n      this.addressList = list\r\n      console.log('地址列表:', this.addressList)\r\n    },\r\n    // 得到默认地址id\r\n    async myDefaultAddressId () {\r\n      const defaultAddressId = await getDefaultAddressId()\r\n      return defaultAddressId\r\n    },\r\n    // 得到地址列表的首位数据\r\n    async myAddressListZero () {\r\n      const { data: { list } } = await getAddressList()\r\n      return list[0] // 里面是对象\r\n    },\r\n    // 得到地址详情\r\n    async myAddressDetail (addressId) {\r\n      const { data: { detail } } = await getAddressDetail(addressId)\r\n      return detail\r\n    },\r\n    // 点击事件，跳转到地址管理页面\r\n    goAddress () {\r\n      // 跳转保留当前页面query参数\r\n      this.$router.push({\r\n        path: '/address/manage',\r\n        query: {\r\n          ...this.$route.query // 保留当前页面query参数\r\n        },\r\n        params: {\r\n          // 声明我是谁\r\n          whoami: 'pay'\r\n        }\r\n      })\r\n    },\r\n    // 提交订单\r\n    async getOrderList () {\r\n      if (this.getModeType === 'cart') {\r\n        // console.log('getModeType === cart得到查询参数cartIds:', this.cartIds)\r\n        // console.log('getModeType === cart得到查询参数goodsId:', this.goodsId)\r\n        const { data } = await checkOrder(this.getModeType, {\r\n          cartIds: this.cartIds\r\n        })\r\n        this.goodsList = data.order.goodsList\r\n        this.personal = data.personal\r\n        this.setting = data.setting\r\n        // console.log('得到的商品列表:', this.goodsList)\r\n      }\r\n      if (this.getModeType === 'buyNow') {\r\n        // console.log('getModeType === buyNow 得到查询参数goodsId:', this.goodsId)\r\n        // console.log('getModeType === buyNow 得到查询参数goodsNum:', this.goodsNum)\r\n        // console.log('getModeType === buyNow 得到查询参数goodsSkuId:', this.goodsSkuId)\r\n        const { data } = await checkOrder(this.getModeType, {\r\n          goodsId: this.goodsId,\r\n          goodsNum: this.goodsNum,\r\n          goodsSkuId: this.goodsSkuId\r\n        })\r\n        this.goodsList = data.order.goodsList\r\n        this.personal = data.personal\r\n        this.setting = data.setting\r\n        // console.log('得到的商品列表:', this.goodsList)\r\n      }\r\n    },\r\n    // 结算订单\r\n    async orderConfirm () {\r\n      if (this.getModeType === 'cart') {\r\n        const { data } = await submitOrder(this.getModeType, {\r\n          cartIds: this.cartIds,\r\n          remark: this.remark\r\n        })\r\n        console.log('cart提交订单成功', data)\r\n      }\r\n      if (this.getModeType === 'buyNow') {\r\n        const { data } = await checkOrder(this.getModeType, {\r\n          remark: this.remark,\r\n          goodsId: this.goodsId,\r\n          goodsNum: this.goodsNum,\r\n          goodsSkuId: this.goodsSkuId\r\n        })\r\n        console.log('buyNow提交订单成功', data)\r\n      }\r\n      this.$router.replace('/myorder')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.pay {\r\n  padding-top: 46px;\r\n  padding-bottom: 46px;\r\n  ::v-deep {\r\n    .van-nav-bar__arrow {\r\n      color: #333;\r\n    }\r\n  }\r\n}\r\n.address {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: flex-start;\r\n  padding: 20px;\r\n  font-size: 14px;\r\n  color: #666;\r\n  position: relative;\r\n  background: url(@/assets/border-line.png) bottom repeat-x;\r\n  background-size: 60px auto;\r\n  .left-icon {\r\n    margin-right: 20px;\r\n  }\r\n  .right-icon {\r\n    position: absolute;\r\n    right: 20px;\r\n    top: 50%;\r\n    transform: translateY(-7px);\r\n  }\r\n}\r\n.goods-item {\r\n  height: 100px;\r\n  margin-bottom: 6px;\r\n  padding: 10px;\r\n  background-color: #fff;\r\n  display: flex;\r\n  .left {\r\n    width: 100px;\r\n    img {\r\n      display: block;\r\n      width: 80px;\r\n      margin: 10px auto;\r\n    }\r\n  }\r\n  .right {\r\n    flex: 1;\r\n    font-size: 14px;\r\n    line-height: 1.3;\r\n    padding: 10px;\r\n    padding-right: 0px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-evenly;\r\n    color: #333;\r\n    .info {\r\n      margin-top: 5px;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      .price {\r\n        color: #fa2209;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.flow-num-box {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 10px 10px;\r\n  font-size: 14px;\r\n  border-bottom: 1px solid #efefef;\r\n  .money {\r\n    color: #fa2209;\r\n  }\r\n}\r\n\r\n.pay-cell {\r\n  font-size: 14px;\r\n  padding: 10px 12px;\r\n  color: #333;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  .red {\r\n    color: #fa2209;\r\n  }\r\n}\r\n.pay-detail {\r\n  border-bottom: 1px solid #efefef;\r\n}\r\n\r\n.pay-way {\r\n  font-size: 14px;\r\n  padding: 10px 12px;\r\n  border-bottom: 1px solid #efefef;\r\n  color: #333;\r\n  .tit {\r\n    line-height: 30px;\r\n  }\r\n  .pay-cell {\r\n    padding: 10px 0;\r\n  }\r\n  .van-icon {\r\n    font-size: 20px;\r\n    margin-right: 5px;\r\n  }\r\n}\r\n\r\n.buytips {\r\n  display: block;\r\n  textarea {\r\n    display: block;\r\n    width: 100%;\r\n    border: none;\r\n    font-size: 14px;\r\n    padding: 12px;\r\n    height: 100px;\r\n  }\r\n}\r\n\r\n.footer-fixed {\r\n  position: fixed;\r\n  background-color: #fff;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  height: 46px;\r\n  line-height: 46px;\r\n  border-top: 1px solid #efefef;\r\n  font-size: 14px;\r\n  display: flex;\r\n  .left {\r\n    flex: 1;\r\n    padding-left: 12px;\r\n    color: #666;\r\n    span {\r\n      color:#fa2209;\r\n    }\r\n  }\r\n  .tipsbtn {\r\n    width: 121px;\r\n    background: linear-gradient(90deg,#f9211c,#ff6335);\r\n    color: #fff;\r\n    text-align: center;\r\n    line-height: 46px;\r\n    display: block;\r\n    font-size: 14px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ddcd7dc6&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ddcd7dc6&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ddcd7dc6\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n// 提交订单确认\r\n// mode: cart(购物车结算) 可补全参数cartIds\r\n// ifObj: buyNow(立即购买) 可补全参数goodsId, goodsNum, goodsSkuId,remark\r\nexport const checkOrder = (mode, ifObj) => {\r\n  // console.log('api接收参数mode:', mode)\r\n  // console.log('api接收参数ifObj:', ifObj)\r\n  const tfkObj = {\r\n    mode: mode, // buyNow：立即购买， cart: 购物车购买\r\n    delivery: 10, // 物流方式\r\n    shopId: 0, // 自提门店id\r\n    couponId: 0, // 优惠券ID，暂时不用\r\n    isUserPoints: 0, // 是否使用积分，1使用，0不使用\r\n    ...ifObj // 未传递的可选参数可用ifObj包装，动态展开\r\n  }\r\n  // console.log('api发送参数tfkObj:', tfkObj)\r\n  return request.get('/checkout/order', {\r\n    params: tfkObj\r\n  })\r\n}\r\n\r\n// 结算订单\r\n// mode: cart(购物车结算) 可补全参数cartIds\r\n// ifObj: buyNow(立即购买) 可补全参数goodsId, goodsNum, goodsSkuId\r\nexport const submitOrder = (mode, dataObj) => {\r\n  const tfkObj = {\r\n    mode: mode, // buyNow：立即购买， cart: 购物车购买\r\n    delivery: 10, // 物流方式\r\n    couponId: 0, // 优惠券ID，暂时不用\r\n    isUserPoints: 0, // 是否使用积分，1使用，0不使用\r\n    payType: 10, // 余额支付\r\n    ...dataObj // 未传递的可选参数可用dataObj包装，动态展开\r\n  }\r\n  return request.post('/checkout/submit', tfkObj)\r\n}\r\n\r\n// 订单列表\r\nexport const getMyOrderList = (dataType, page) => {\r\n  return request.get('/order/list', {\r\n    params: {\r\n      dataType,\r\n      page\r\n    }\r\n  })\r\n}\r\n\r\n// 获取订单详情\r\nexport const getOrderDetail = (orderId) => {\r\n  return request.get('/order/detail', {\r\n    params: {\r\n      orderId: orderId\r\n    }\r\n  })\r\n}\r\n\r\n// 取消订单\r\nexport const cancelOrder = (orderId) => {\r\n  return request.post('/order/cancel', {\r\n    orderId: orderId\r\n  })\r\n}\r\n\r\n// 支付未支付的订单\r\nexport const payOrder = (orderId, payType) => {\r\n  return request.get('/order/pay', {\r\n    query: {\r\n      orderId: orderId,\r\n      payType: payType // 支付方式，10：余额支付，20：微信支付\r\n    }\r\n  })\r\n}\r\n\r\n// 订单确认收货\r\nexport const receiptOrder = (orderId) => {\r\n  return request.post('/order/receipt', {\r\n    orderId: orderId\r\n  })\r\n}\r\n\r\n// 提交商品评价\r\nexport const submitComment = (dataObj) => {\r\n  return request.post('/order.comment/submit', {\r\n    orderId: dataObj.orderId,\r\n    form: dataObj.form\r\n  })\r\n}\r\n\r\n// 已评价的商品列表\r\nexport const getCommentList = (orderId) => {\r\n  return request.get('/order.comment/list', {\r\n    query: {\r\n      orderId: orderId\r\n    }\r\n  })\r\n}\r\n\r\n// 申请售后\r\nexport const refundGoods = (dataObj) => {\r\n  return request.post('/refund/goods', {\r\n    orderGoodsId: dataObj.orderGoodsId,\r\n    form: dataObj.form\r\n  })\r\n}\r\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","chosenAddress","_v","_s","name","phone","detail","goAddress","_l","goodsList","item","key","goods_id","goods_image","goods_name","total_num","total_price","goodsNumCount","goodsTotalPrice","personal","couponId","balance","directives","rawName","value","remark","expression","domProps","target","composing","orderConfirm","staticRenderFns","mixins","addressCTN","addressHandler","created","data","defaultId","myDefaultAddressId","myDefaultId","console","log","error","myAddressList","addressList","length","res","myAddressDetail","Number","getRegionStrByCode","getRegionCode","province_id","city_id","region_id","myAddressListZero","getOrderList","setting","computed","price","forEach","goods_price_min","toFixed","count","selectedA","cartIds","$route","query","getadsid","params","adsid","getModeType","mode","goodsId","goodsSkuId","goodsNum","methods","mapMutations","mapActions","mapGetters","list","getAddressList","defaultAddressId","getDefaultAddressId","addressId","getAddressDetail","push","path","whoami","checkOrder","order","submitOrder","replace","component","ifObj","tfkObj","delivery","shopId","isUserPoints","request","get","dataObj","payType","post","getMyOrderList","dataType","page","getOrderDetail","orderId","cancelOrder","receiptOrder","submitComment","form"],"sourceRoot":""}